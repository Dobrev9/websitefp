<% content_for :title, "Edit Home Page Text - English Class" %>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <!-- Header -->
      <div class="card border-0 shadow-sm mb-4" style="background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);">
        <div class="card-body text-white p-4">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h1 class="h2 fw-bold mb-2">✏️ Edit Home Page Text</h1>
              <p class="mb-0 opacity-90">Update the homework portal content that appears on the main page</p>
            </div>
            <div>
              <%= link_to "← Back", protected_content_path, class: "btn btn-light fw-semibold" %>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit Form -->
      <div class="card shadow-sm border-0">
        <div class="card-body p-4">
          <%= form_with url: update_home_text_path, method: :patch, local: true do |form| %>
            <div class="mb-4">
              <label for="homework_content" class="form-label fw-bold">
                <i class="fas fa-clipboard-check text-primary me-2"></i>
                Homework Portal Content
              </label>
              <%= form.text_area :homework_content,
                  id: "homework_content",
                  value: @homework_content,
                  class: "form-control",
                  rows: 6,
                  placeholder: "Enter the content that will appear in the homework portal section...",
                  style: "font-size: 1rem; line-height: 1.5;" %>
              <div class="form-text">
                This text will appear under the "Homework Portal" section on your home page.
              </div>
            </div>

            <!-- Preview -->
            <div class="mb-4">
              <h6 class="fw-bold text-muted mb-2">
                <i class="fas fa-eye me-2"></i>
                Preview
              </h6>
              <div class="border rounded p-3 bg-light">
                <div class="d-flex align-items-start">
                  <div class="resource-icon me-3 text-primary">
                    <i class="bi bi-clipboard-check fs-4" aria-hidden="true"></i>
                  </div>
                  <div>
                    <h5 class="h6 fw-bold mb-2">Homework Portal</h5>
                    <!-- FIXED: Properly handle whitespace and line breaks -->
                    <div class="small mb-0" id="content-preview" style="white-space: pre-line;">
                      <%= (@homework_content&.strip || "Enter content to see preview...") %>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="d-flex gap-2">
              <%= form.submit "Save Changes", 
                  class: "btn btn-primary fw-semibold px-4",
                  style: "background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); border: none;" %>
              <%= link_to "Cancel", protected_content_path, 
                  class: "btn btn-outline-secondary fw-semibold px-4" %>
            </div>
          <% end %>
        </div>
      </div>

      <!-- Help Section -->
      <div class="card border-0 bg-light mt-4">
        <div class="card-body p-4">
          <h6 class="fw-bold text-dark mb-2">
            <i class="fas fa-lightbulb text-warning me-2"></i>
            Tips for Writing Effective Content
          </h6>
          <ul class="list-unstyled mb-0 text-muted small">
            <li>• Keep it concise and easy to read</li>
            <li>• Include important dates and deadlines</li>
            <li>• Use clear, student-friendly language</li>
            <li>• Consider what information students need most</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<%= javascript_include_tag 'edit_home_text', defer: true %>

<!-- Add Font Awesome and Bootstrap Icons if not already included -->
<% content_for :head do %>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<% end %>